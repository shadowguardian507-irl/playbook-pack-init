# test pipline

trigger:
- master
- unstable

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: ls
  displayName: 'list working dir'
- script: test -e ./playbook-pack-init
  continueOnError: false
  displayName: 'check playbook-pack-init script is present'
- script: shellcheck -V
  continueOnError: false
  displayName: 'show shellcheck version'
- script: shellcheck playbook-pack-init
  continueOnError: false
  displayName: 'run shellcheck'
- script: mkdir test
  continueOnError: false
  displayName: 'make test dir'
- script: ../playbook-pack-init -s
  workingDirectory: ./test
  displayName: 'run playbook-pack-init script'
- script: ls
  workingDirectory: ./test
  displayName: 'list working dir'
- script: ./Ansible/templates/playbook/playbook.pb.sh
  workingDirectory: ./test
  displayName: 'run the test playbook pack'
